<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Relic - Gray Challenge</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Audiowide&family=Rajdhani:wght@300;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a3a 50%, #1a1a1a 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        h1 {
            font-family: 'Audiowide', cursive;
            font-size: 42px;
            color: #888;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(136, 136, 136, 0.8);
        }
        
        .level-indicator {
            text-align: center;
            font-size: 18px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 40px;
            letter-spacing: 2px;
        }
        
        .challenge-section {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(136, 136, 136, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .section-title {
            font-size: 24px;
            color: #aaa;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .mystery-box {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid rgba(255, 0, 0, 0.5);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .mystery-word {
            font-size: 32px;
            font-weight: 600;
            color: #ff6b6b;
            letter-spacing: 4px;
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        
        .io-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .io-box {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(136, 136, 136, 0.2);
            border-radius: 10px;
            padding: 20px;
        }
        
        .io-label {
            font-size: 16px;
            color: #aaa;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(136, 136, 136, 0.3);
            border-radius: 8px;
            color: #fff;
            font-size: 18px;
            font-family: 'Rajdhani', sans-serif;
            transition: all 0.3s ease;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #888;
            box-shadow: 0 0 15px rgba(136, 136, 136, 0.3);
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            background: linear-gradient(135deg, #888 0%, #666 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 18px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(136, 136, 136, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .history {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .history-item {
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid #888;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 16px;
        }
        
        .history-item span {
            color: #aaa;
            font-weight: 600;
        }
        
        .submit-section {
            background: rgba(0, 255, 0, 0.05);
            border: 2px solid rgba(0, 255, 0, 0.3);
        }
        
        .submit-button {
            background: linear-gradient(135deg, #00ff88 0%, #00cc66 100%);
            color: #000;
        }
        
        .error {
            color: #ff6b6b;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .success {
            color: #00ff88;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .hint {
            background: rgba(255, 255, 0, 0.1);
            border: 1px solid rgba(255, 255, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            color: #ffeb3b;
            font-size: 14px;
        }
        
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: #fff;
            text-decoration: none;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    
    
    <div class="container">
        <h1>Gray Challenge</h1>
        <div class="level-indicator">LEVEL 2 </div>
        <div class="level-indicator">The server's cipher is in your hand. Now, Force it to betray its master. The city's core database has its own key—a deeper, silent cipher. Find it. The Relic's schematics, its location, its weaknesses... everything is behind that final lock. Crack it, and history becomes a weapon we can rewrite</div>
        
        
        <div class="challenge-section mystery-box">
            <div class="section-title"> Decrypt This Word</div>
            <div class="mystery-word" id="mysteryEncrypted">XXFUDG</div>
            <p style="color: rgba(255,255,255,0.7); margin-top: 10px;">
             Test carefully
            </p>
        </div>
        
        <div class="challenge-section">
            <div class="section-title"> Testing Ground</div>
            <p style="color: rgba(255,255,255,0.7); margin-bottom: 20px;">
                Encrypt any word (except the mystery word) to understand the pattern. Decryption not available!
            </p>
            
            <div class="io-container">
                <div class="io-box">
                    <div class="io-label">Input Word</div>
                    <input type="text" id="inputWord" placeholder="Enter a word...">
                </div>
                <div class="io-box">
                    <div class="io-label">Output</div>
                    <input type="text" id="outputWord" readonly placeholder="Result appears here...">
                </div>
            </div>
            
            <div class="button-group">
                <button onclick="encryptTest()"> Encrypt</button>
            </div>
            
            <div id="testError" class="error"></div>
            
            <div class="hint">
                 <strong>Hint:</strong> Without decryption, you'll need to work backwards! Try words and see their encrypted form.
            </div>
            
            
            <div class="history" id="history"></div>
        </div>
        
        
        <div class="challenge-section submit-section">
            <div class="section-title"> Submit Your Answer</div>
            <p style="color: rgba(255,255,255,0.7); margin-bottom: 20px;">
                What is the decrypted version of <strong style="color: #ff6b6b;">XXFUDG</strong>?
            </p>
            
            <input type="text" id="answerInput" placeholder="Enter your answer...">
            <button class="submit-button" onclick="submitAnswer()" style="margin-top: 15px;">Submit Answer</button>
            
            <div id="answerFeedback"></div>
        </div>
    </div>

    <script>

        const SHIFT = 5;
        const MYSTERY_WORD = "BYPASS"; // inspecting the code source ? okay u win 
        const MYSTERY_ENCRYPTED = "XXFUDG";
        
        let history = [];
        
        
        if (!localStorage.getItem('whiteCompleted')) {
            window.location.href = 'index.html';
        }
        
        function reverseAndShift(text, shift = SHIFT) {
            
            const reversed = text.toUpperCase().split('').reverse().join('');
            return reversed.split('').map(char => {
                if (char.match(/[A-Z]/)) {
                    const code = ((char.charCodeAt(0) - 65 + shift) % 26) + 65;
                    return String.fromCharCode(code);
                }
                return char;
            }).join('');
        }
        
        function shiftAndReverse(text, shift = SHIFT) {
            
            const shifted = text.toUpperCase().split('').map(char => {
                if (char.match(/[A-Z]/)) {
                    const code = ((char.charCodeAt(0) - 65 - shift + 26) % 26) + 65;
                    return String.fromCharCode(code);
                }
                return char;
            }).join('');
            return shifted.split('').reverse().join('');
        }
        
        function encryptTest() {
            const input = document.getElementById('inputWord').value.trim().toUpperCase();
            const errorDiv = document.getElementById('testError');
            
            errorDiv.textContent = '';
            
            if (!input) {
                errorDiv.textContent = 'Please enter a word!';
                return;
            }
            
            if (input === MYSTERY_ENCRYPTED || shiftAndReverse(input) === MYSTERY_WORD) {
                errorDiv.textContent = ' AYAYAY, YOU CANT BUT NICE TRY  !';
                document.getElementById('outputWord').value = '';
                return;
            }
            
            const encrypted = reverseAndShift(input);
            document.getElementById('outputWord').value = encrypted;
            
            addToHistory(`ENCRYPT: ${input} → ${encrypted}`);
        }
        
        function decryptTest() {
            const input = document.getElementById('inputWord').value.trim().toUpperCase();
            const errorDiv = document.getElementById('testError');
            
            errorDiv.textContent = '';
            
            if (!input) {
                errorDiv.textContent = 'Please enter a word !';
                return;
            }
            
            if (input === MYSTERY_ENCRYPTED) {
                errorDiv.textContent = ' You cannot test the mystery word!';
                document.getElementById('outputWord').value = '';
                return;
            }
            
            const decrypted = shiftAndReverse(input);
            document.getElementById('outputWord').value = decrypted;
            
            addToHistory(`DECRYPT: ${input} → ${decrypted}`);
        }
        
        function addToHistory(text) {
            history.unshift(text);
            if (history.length > 10) history.pop();
            
            const historyDiv = document.getElementById('history');
            historyDiv.innerHTML = history.map(item => 
                `<div class="history-item">${item.replace('→', '→')}</div>`
            ).join('');
        }
        
        function submitAnswer() {
            const answer = document.getElementById('answerInput').value.trim().toUpperCase();
            const feedback = document.getElementById('answerFeedback');
            
            if (!answer) {
                feedback.innerHTML = '<div class="error">Please enter an answer!</div>';
                return;
            }
            
            if (answer === MYSTERY_WORD) {
                feedback.innerHTML = `
                    <div class="success" style="font-size: 18px; margin-top: 20px;">
                         <strong>CORRECT!</strong> You've mastered the Gray level!<br>
                        <span style="font-size: 14px;">The algorithm: Reverse text, then Caesar shift by 5.</span><br>
                        <a href="notindex3.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: #00ff88; color: #000; text-decoration: none; border-radius: 8px; font-weight: 600;">
                            Continue to Black Challenge →
                        </a>
                    </div>
                `;
                
                
                localStorage.setItem('grayCompleted', 'true');
            } else {
                feedback.innerHTML = '<div class="error"> Incorrect! Think Think </div>';
            }
        }
                
        document.getElementById('answerInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') submitAnswer();
        });
        
        document.getElementById('inputWord').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') encryptTest();
        });
    </script>
    
</body>
</html>